{% extends 'common/base.html' %}
{% load static %}
{% block body_class %}calendar-page{% endblock %}

{% block content %}
<h2 class="calendar-heading"> Habit Schedule Calendar</h2>

<div id="calendar"></div>
{% endblock %}

{% block scripts %}
<!-- FullCalendar JS -->
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>

<!-- FullCalendar Initialization -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const calendarEl = document.getElementById('calendar');
    if (!calendarEl) return;

    const calendar = new FullCalendar.Calendar(calendarEl, {
      initialView: 'dayGridMonth',
      timeZone: 'local',
      headerToolbar: {
        left: 'prev,next today',
        center: 'title',
        right: 'dayGridMonth,timeGridWeek,timeGridDay'
      },
      events: {
        url: '/schedule/api/events/',
        failure: function() {},
        success: function(events) {}
      },
      eventClick: function (info) {
        alert('Routine: ' + info.event.title + '\nStart Date: ' + info.event.start.toLocaleString());
      }
    });

    calendar.render();
  });
</script>

{% endblock %}
